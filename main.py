import streamlit as st
import random

# ==============================
# 여행지 데이터베이스 (각 기분별 20개)
# ==============================
travel_recommendations = {
    "행복 😀": [
        ("제주도", "성산일출봉", "제주 흑돼지"),
        ("부산", "광안리 해변", "돼지국밥"),
        ("전주", "한옥마을", "비빔밥"),
        ("경주", "불국사", "황남빵"),
        ("여수", "돌산대교", "게장백반"),
        ("순천", "순천만 국가정원", "짱뚱어탕"),
        ("통영", "한려수도", "굴 요리"),
        ("서울", "남산타워", "치킨"),
        ("속초", "대포항", "오징어순대"),
        ("강릉", "경포대", "초당두부"),
        ("부여", "백제문화단지", "연잎밥"),
        ("안동", "하회마을", "안동찜닭"),
        ("대구", "팔공산", "막창"),
        ("포항", "호미곶", "과메기"),
        ("인천", "월미도", "짬뽕"),
        ("울산", "대왕암 공원", "고래고기"),
        ("창원", "진해 벚꽃길", "가자미회"),
        ("김해", "수로왕릉", "돼지갈비"),
        ("군산", "선유도", "짬뽕"),
        ("광주", "무등산", "송정떡갈비")
    ],
    "우울 😔": [
        ("강릉", "안목 해변 카페거리", "커피"),
        ("여수", "오동도", "게장백반"),
        ("군산", "근대문화거리", "짬뽕"),
        ("속초", "설악산 케이블카", "오징어순대"),
        ("통영", "동피랑 벽화마을", "꿀빵"),
        ("부산", "태종대", "밀면"),
        ("제주도", "협재해변", "갈치조림"),
        ("서울", "북촌 한옥마을", "떡볶이"),
        ("전주", "남부시장 야시장", "모주"),
        ("안동", "병산서원", "간고등어"),
        ("청주", "상당산성", "청주 순대"),
        ("대전", "유성온천", "칼국수"),
        ("춘천", "소양강 스카이워크", "닭갈비"),
        ("경주", "대릉원", "쌈밥"),
        ("목포", "유달산", "홍어삼합"),
        ("의성", "빙계계곡", "마늘 음식"),
        ("보성", "녹차밭", "녹차 아이스크림"),
        ("담양", "관방제림", "떡갈비"),
        ("태안", "안면도", "꽃게찜"),
        ("거제", "바람의 언덕", "멍게비빔밥")
    ],
    "지침 😵": [
        ("담양", "죽녹원", "죽순 요리"),
        ("춘천", "남이섬", "닭갈비"),
        ("보성", "녹차밭", "녹차 아이스크림"),
        ("가평", "아침고요수목원", "잣죽"),
        ("태안", "꽃지 해수욕장", "꽃게찜"),
        ("양평", "두물머리", "두물머리 국수"),
        ("정선", "레일바이크", "곤드레밥"),
        ("속초", "영금정", "회국수"),
        ("포천", "한탄강 협곡", "막국수"),
        ("횡성", "자연휴양림", "한우"),
        ("홍천", "비발디파크", "잣칼국수"),
        ("평창", "대관령 양떼목장", "감자전"),
        ("영월", "청령포", "쏘가리 매운탕"),
        ("문경", "새재도립공원", "약돌 한우"),
        ("하동", "섬진강", "재첩국"),
        ("남해", "독일마을", "맥주와 소시지"),
        ("곡성", "기차마을", "멜론 빙수"),
        ("산청", "지리산 둘레길", "흑돼지 두루치기"),
        ("무주", "적상산", "산채비빔밥"),
        ("청송", "주산지", "사과 요리")
    ],
    "따분함 🥱": [
        ("서울", "홍대 거리", "길거리 음식"),
        ("인천", "차이나타운", "짜장면"),
        ("대구", "동성로", "막창"),
        ("광주", "양림동 문화마을", "송정떡갈비"),
        ("부산", "자갈치 시장", "회"),
        ("수원", "화성행궁", "통닭"),
        ("전주", "영화의 거리", "막걸리"),
        ("제천", "청풍문화재단지", "올갱이 해장국"),
        ("원주", "뮤지엄 산", "감자 옹심이"),
        ("대전", "대전엑스포과학공원", "칼국수"),
        ("천안", "독립기념관", "호두과자"),
        ("김천", "직지사", "사과"),
        ("포항", "죽도시장", "물회"),
        ("안동", "월영교", "안동찜닭"),
        ("순천", "드라마 촬영장", "짱뚱어탕"),
        ("목포", "갓바위", "홍어삼합"),
        ("울산", "태화강 십리대숲", "언양 불고기"),
        ("양양", "서피비치", "장칼국수"),
        ("고양", "킨텍스", "족발"),
        ("부여", "궁남지", "연잎밥")
    ],
    "모험 🤩": [
        ("속초", "설악산 등반", "오징어순대"),
        ("평창", "래프팅 체험", "한우"),
        ("제주도", "우도 자전거 여행", "땅콩 아이스크림"),
        ("단양", "패러글라이딩", "마늘 만두"),
        ("무주", "덕유산 스키장", "산채비빔밥"),
        ("정선", "짚와이어", "곤드레밥"),
        ("포천", "베어스타운 스키장", "막국수"),
        ("양양", "서핑", "장칼국수"),
        ("가평", "수상레저", "닭강정"),
        ("춘천", "카약 체험", "닭갈비"),
        ("여수", "스쿠버 다이빙", "해산물 모듬"),
        ("부산", "송정 해수욕장 서핑", "돼지국밥"),
        ("거제", "요트 체험", "멍게비빔밥"),
        ("강릉", "산악자전거", "초당두부"),
        ("고성", "DMZ 트레킹", "황태국"),
        ("울진", "해양 레포츠", "대게"),
        ("태백", "스노우 어드벤처", "곤드레밥"),
        ("영월", "동굴 탐험", "쏘가리 매운탕"),
        ("철원", "빙벽 등반", "한탄강 막국수"),
        ("완도", "바다 카약", "전복죽")
    ]
}

# ==============================
# 세션 상태 (중복 방지용)
# ==============================
if "used_places" not in st.session_state:
    st.session_state.used_places = {m: [] for m in travel_recommendations.keys()}

# ==============================
# CSS 꾸미기
# ==============================
st.markdown("""
    <style>
    body {
        background: linear-gradient(135deg, #fceabb, #f8b500);
    }
    .title {
        text-align: center;
        font-size: 50px;
        font-weight: bold;
        background: -webkit-linear-gradient(45deg, #ff4e50, #f9d423);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        margin-bottom: 30px;
    }
    .card {
        background-color: white;
        border-radius: 20px;
        padding: 25px;
        margin: 20px 0;
        box-shadow: 5px 5px 20px rgba(0,0,0,0.2);
    }
    .subtitle {
        font-size: 24px;
        font-weight: bold;
        color: #333;
    }
    </style>
""", unsafe_allow_html=True)

# ==============================
# 앱 UI
# ==============================
st.markdown("<div class='title'>🌸 기분 따라 떠나는 국내 여행 🌸</div>", unsafe_allow_html=True)

mood = st.selectbox("👉 오늘 기분을 선택하세요!", list(travel_recommendations.keys()))

if st.button("✨ 추천받기 ✨"):
    candidates = [p for p in travel_recommendations[mood] if p not in st.session_state.used_places[mood]]
    
    if not candidates:
        st.warning("해당 기분의 모든 여행지를 추천했어요! 🔄 다른 기분을 선택해보세요.")
    else:
        choice = random.choice(candidates)
        st.session_state.used_places[mood].append(choice)

        지역, 관광지, 음식 = choice

        # 카드 형태 출력 - 제목 = 지역 이름
        st.markdown(f"""
            <div class="card">
                <div class="subtitle">{지역}</div>
                <p>{지역}은 한국을 대표하는 여행지예요.<br>
                자연과 문화가 공존하며 사계절 내내 다양한 매력이 있습니다.<br>
                언제 방문해도 특별한 경험을 선사해요.<br>
                행복한 추억을 만들기에 딱 좋은 곳입니다.</p>
            </div>
        """, unsafe_allow_html=True)

        # 카드 형태 출력 - 제목 = 관광지 이름
        st.markdown(f"""
            <div class="card">
                <div class="subtitle">{관광지}</div>
                <p>{관광지}는 {지역}에서 꼭 가봐야 할 명소입니다.<br>
                아름다운 풍경과 특별한 체험을 제공합니다.<br>
                현지 문화를 더 깊이 느낄 수 있어요.<br>
                사진 찍기에도 최고의 장소랍니다.</p>
            </div>
        """, unsafe_allow_html=True)

        # 카드 형태 출력 - 제목 = 음식 이름
        st.markdown(f"""
            <div class="card">
                <div class="subtitle">{음식}</div>
                <p>{음식}은 {지역}의 대표 음식이에요.<br>
                현지에서만 느낄 수 있는 특별한 맛이 있습니다.<br>
                여행의 즐거움을 더해주는 별미랍니다.<br>
                {지역}에 간다면 꼭 맛보세요!</p>
            </div>
        """, unsafe_allow_html=True)
